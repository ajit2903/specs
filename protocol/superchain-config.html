<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Superchain Configuration - OP Stack Specification</title>


        <!-- Custom HTML head -->
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-YNLKSPKGWN"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'G-YNLKSPKGWN');
        </script>
        <meta name="google-site-verification" content="1XjEcxxHshd6NM_mxbl_uv-SyamI6_99aOpILYI3_mk" />

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">OP Stack Specification</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ethereum-optimism/specs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/ethereum-optimism/specs/edit/main/specs/protocol/superchain-config.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="superchain-configuration"><a class="header" href="#superchain-configuration">Superchain Configuration</a></h1>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#invariants">Invariants</a>
<ul>
<li><a href="#isupc-001-the-guardian-and-pause-deputy-must-be-able-to-trigger-the-pause-mechanism">iSUPC-001: The Guardian and Pause Deputy must be able to trigger the Pause Mechanism</a>
<ul>
<li><a href="#impact">Impact</a></li>
</ul>
</li>
<li><a href="#isupc-002-the-guardian-must-be-able-to-reset-or-undo-the-pause-mechanism">iSUPC-002: The Guardian must be able to reset or undo the Pause Mechanism</a>
<ul>
<li><a href="#impact-1">Impact</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#function-specification">Function Specification</a>
<ul>
<li><a href="#initialize">initialize</a></li>
<li><a href="#guardian">guardian</a></li>
<li><a href="#pause">pause</a></li>
<li><a href="#unpause">unpause</a></li>
<li><a href="#pausable">pausable</a></li>
<li><a href="#paused">paused</a></li>
<li><a href="#expiration">expiration</a></li>
<li><a href="#reset">reset</a></li>
</ul>
</li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The SuperchainConfig contract is used to manage global configuration values for multiple OP Chains
within a single Superchain network.</p>
<h2 id="invariants"><a class="header" href="#invariants">Invariants</a></h2>
<h3 id="isupc-001-the-guardian-and-pause-deputy-must-be-able-to-trigger-the-pause-mechanism"><a class="header" href="#isupc-001-the-guardian-and-pause-deputy-must-be-able-to-trigger-the-pause-mechanism">iSUPC-001: The Guardian and Pause Deputy must be able to trigger the Pause Mechanism</a></h3>
<p>We require that the <code>SuperchainConfig</code> is constructed such that both the
<a href="./stage-1.html#guardian">Guardian</a> and the <a href="./stage-1.html#pause-deputy">Pause Deputy</a> must be able to
trigger the <a href="./stage-1.html#pause-mechanism">Pause Mechanism</a> at any time.</p>
<h4 id="impact"><a class="header" href="#impact">Impact</a></h4>
<p><strong>Severity: High</strong></p>
<p>Existing recovery runbooks would not function as expected if the <code>SuperchainConfig</code> prevented one
of these actors from triggering the pause as needed.</p>
<h3 id="isupc-002-the-guardian-must-be-able-to-reset-or-undo-the-pause-mechanism"><a class="header" href="#isupc-002-the-guardian-must-be-able-to-reset-or-undo-the-pause-mechanism">iSUPC-002: The Guardian must be able to reset or undo the Pause Mechanism</a></h3>
<p>We require that the <code>SuperchainConfig</code> is constructed such that the
<a href="./stage-1.html#guardian">Guardian</a> must be able to reset or unpause the
<a href="./stage-1.html#pause-mechanism">Pause Mechanism</a> at any time.</p>
<h4 id="impact-1"><a class="header" href="#impact-1">Impact</a></h4>
<p><strong>Severity: Medium</strong></p>
<p>If the Pause Mechanism cannot be reset then it cannot be used again without intervention from the
<a href="./stage-1.html#proxy-admin-owner">Proxy Admin Owner</a>. We consider this to be a Medium severity
issue because the Proxy Admin Owner will have several months to coordinate such a fix assuming
that <a href="#isupc-001-the-guardian-and-pause-deputy-must-be-able-to-trigger-the-pause-mechanism">iSUPC-001</a> holds.</p>
<h2 id="function-specification"><a class="header" href="#function-specification">Function Specification</a></h2>
<h3 id="initialize"><a class="header" href="#initialize">initialize</a></h3>
<ul>
<li>MUST only be triggerable once.</li>
<li>MUST set the value of the Guardian role.</li>
<li>MUST set the value of the pause expiry period.</li>
</ul>
<h3 id="guardian"><a class="header" href="#guardian">guardian</a></h3>
<p>Returns the address of the current <a href="./stage-1.html#guardian">Guardian</a>.</p>
<h3 id="pause"><a class="header" href="#pause">pause</a></h3>
<p>Allows the <a href="./stage-1.html#guardian">Guardian</a> to trigger the
<a href="./stage-1.html#pause-mechanism">Pause Mechanism</a>. <code>pause</code> takes an address
<a href="./stage-1.html#pause-identifier">Pause Identifier</a> as an input. This identifier determines which
systems or chains are affected by the pause.</p>
<ul>
<li>MUST revert if called by an address other than the Guardian.</li>
<li>MUST revert if the pausable flag for the given identifier is set to 1 (used/unavailable).</li>
<li>MUST set the pause timestamp for the given identifier to the current block timestamp.</li>
<li>MUST set the pausable flag for the given identifier to 1 (used/unavailable) to prevent repeated
pauses without a reset.</li>
</ul>
<h3 id="unpause"><a class="header" href="#unpause">unpause</a></h3>
<p>Allows the <a href="./stage-1.html#guardian">Guardian</a> to explicitly unpause the system for a given
<a href="./stage-1.html#pause-identifier">Pause Identifier</a> rather than waiting for the pause to expire.
Unpausing a specific identifier does NOT unpause the global pause (zero address identifier). If the
global pause is active, all systems will remain paused even if their specific identifiers are
unpaused. Note that <code>unpause</code> will not revert if the pause is not currently active which would
cause <code>unpause</code> to act like a call to <code>reset</code>.</p>
<ul>
<li>MUST revert if called by an address other than the Guardian.</li>
<li>MUST set the pause timestamp for the given identifier to 0, representing "not paused".</li>
<li>MUST set the pausable flag for the given identifier to 0 (ready to pause), allowing the pause
mechanism to be used again.</li>
</ul>
<h3 id="pausable"><a class="header" href="#pausable">pausable</a></h3>
<p>Allows any user to check if the <a href="./stage-1.html#pause-mechanism">Pause Mechanism</a> can be triggered
for a specific <a href="./stage-1.html#pause-identifier">Pause Identifier</a>. The pausable status of a specific
identifier is independent of the pausable status of the global pause (zero address identifier).</p>
<ul>
<li>MUST return true if the pausable flag for the given identifier is 0 (ready to pause).</li>
<li>MUST return false if the pausable flag for the given identifier is 1 (used/unavailable).</li>
</ul>
<h3 id="paused"><a class="header" href="#paused">paused</a></h3>
<p>Allows any user to check if the system is currently paused for a specific
<a href="./stage-1.html#pause-identifier">Pause Identifier</a>.</p>
<ul>
<li>MUST return true if the pause timestamp for the given identifier is non-zero AND not expired
(current time &lt; pause timestamp + expiry duration).</li>
<li>MUST return false otherwise.</li>
</ul>
<h3 id="expiration"><a class="header" href="#expiration">expiration</a></h3>
<p>Returns the timestamp at which the pause for a given
<a href="./stage-1.html#pause-identifier">Pause Identifier</a> will expire. This function only returns the
expiration for the specific identifier provided.</p>
<ul>
<li>MUST return the pause timestamp plus the configured expiry duration if the pause timestamp is non-zero.</li>
<li>MUST return 0 if the pause timestamp is 0 (system is not paused) for the given identifier.</li>
</ul>
<h3 id="reset"><a class="header" href="#reset">reset</a></h3>
<p>Allows the <a href="./stage-1.html#guardian">Guardian</a> to reset the pause mechanism for a given
<a href="./stage-1.html#pause-identifier">Pause Identifier</a>, allowing it to be used again. Note that <code>reset</code>
will not revert if the pausable flag is already set to zero.</p>
<ul>
<li>MUST revert if called by an address other than the Guardian.</li>
<li>MUST set the pausable flag for the given identifier to 0 (ready to pause).</li>
<li>MUST NOT modify the pause timestamp for the given identifier.</li>
<li>NOTE: Resetting the pausable flag for a specific identifier does not affect the pause status. If
a system is currently paused, it will remain paused until explicitly unpaused or until the pause
expires.</li>
</ul>
<!-- references -->

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../protocol/preinstalls.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../protocol/superchain-upgrades.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../protocol/preinstalls.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../protocol/superchain-upgrades.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../specs/static/solidity.min.js"></script>
        <script src="../specs/static/mermaid.min.js"></script>
        <script src="../specs/static/mermaid-init.js"></script>


    </div>
    </body>
</html>
